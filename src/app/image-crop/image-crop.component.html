<div class="image-crop">
    <div class="display" (rotate)="onRotate($event)" (panstart)="onPanStart($event)" (panmove)="onPan($event)" >
        <svg class="mask" [attr.width]="imageWidth" [attr.height]="imageHeight" attr.viewBox="0 0 {{imageWidth}} {{imageHeight}}">
            <defs>
                <mask id="mask" clipPathUnits="objectBoundingBox">
                    <rect x="0" y="0" attr.width="{{maskWidth}}" attr.height="{{maskHeight}}" fill="white"/>
                    <rect x="0" y="0" attr.width="{{imageWidth}}" attr.height="{{imageWidth}}" opacity="0.2" fill="white"/>
                </mask>
            </defs>
            <g  mask="url(#mask)">
            <image class="image" [ngStyle]="getImageStyles()"
                   attr.transform="translate({{x}} {{y}}) rotate({{rotation}} {{imageWidth/2}} {{imageHeight/2}})" [attr.xlink:href]="imageURL"/>
            <rect x="0" y="0" attr.width="{{maskWidth}}" attr.height="{{maskHeight}}" stroke="green" stroke-width="2" fill="none"/>
            </g>
        </svg>
    </div>
    <div class="controls">
        <div>
            <label>Mask Width</label><input [(ngModel)]="maskWidth" />
            <label>Mask Height</label><input [(ngModel)]="maskHeight" />
        </div>
        <div>
            <label>Image Width</label><input [(ngModel)]="imageWidth" />
            <label>Image Height</label><input [(ngModel)]="imageHeight" /><br>
            <label>Translate X</label><input [(ngModel)]="x" />
            <label>Translate Y</label><input [(ngModel)]="y" />
            <label>Rotate</label><input [(ngModel)]="rotation" />
        </div>
    </div>
</div>